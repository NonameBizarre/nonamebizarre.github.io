/* Created by Olphabet */var mygame;!function(a){var b=function(){function b(){}return b.init=function(b,c,d){this.showDebugHeader(null==d?1:d),this.globalEvents=new a.OEventDispatcher,this.defaultWidth=b,this.defaultHeight=c,this.centerX=.5*b,this.centerY=.5*c},b.begin=function(a,b){this.game=a,this.game.input.maxPointers=1,this.game.stage.disableVisibilityChange=!0,this.game.scale.scaleMode=Phaser.ScaleManager.USER_SCALE,this.game.scale.pageAlignHorizontally=!0,this.game.scale.pageAlignVertically=!0;this.game.input.touch.preventDefault=!1,1==b&&(this.game.device.desktop?this.game.input.mouse.enabled=!0:this.game.input.mouse.enabled=!1),window.addEventListener("resize",this.checkScreenStatus.bind(this),!1),this.game.scale.onOrientationChange.add(this.checkScreenStatus,this),this.checkScreenStatus()},b.checkScreenStatus=function(){this._fullWidth==window.innerWidth&&this._fullHeight==window.innerHeight||(this.changeScale(this.game),this.globalEvents.dispatch("changeOrientationAndResize"))},b.changeScale=function(a){this._fullWidth=this.width=window.innerWidth,this._fullHeight=this.height=window.innerHeight;var b=this.width,c=this.height;this.isLandscape!=this.isDefaultLandscape&&(b=this.height,c=this.width);var d=1;d=Math.min(b/this.defaultWidth,c/this.defaultHeight),this.bgModeScale=Math.max(this.width/this.defaultWidth,this.height/this.defaultHeight)/d,this.width/=d,this.height/=d,a.scale.setUserScale(d,d,0,0),a.scale.setGameSize(this.width,this.height),a.world.setBounds(0,0,this.width,this.height),a.scale.refresh()},b.gotoFunction=function(a){var b=window[a];"function"==typeof b&&b()},b.showDebugHeader=function(a){var b;switch(a){case 0:return;case 1:b="o.selyukov@gmail.com";break;case 2:b="                    "}if(navigator.userAgent.search(/Chrome/)>-1){var c=["%c     Olphabet Core v"+this.VERSION+" | "+b+"   ","color: #ffffff; background: #757B96"];console.log.apply(console,c)}else console.log("Olphabet Core v"+this.VERSION+" | "+b)},Object.defineProperty(b,"isDesktop",{get:function(){return this.game.device.desktop},enumerable:!0,configurable:!0}),Object.defineProperty(b,"isLandscape",{get:function(){return this.height<this.width},enumerable:!0,configurable:!0}),Object.defineProperty(b,"isDefaultLandscape",{get:function(){return this.defaultHeight<this.defaultWidth},enumerable:!0,configurable:!0}),b.VERSION=.2,b.bgModeScale=1,b}();a.Core=b}(mygame||(mygame={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},mygame;!function(a){var b=function(b){function c(c,d,e){void 0===e&&(e=null);var f=null,g=null,h=null;d.length>0&&(f=d[0],d.length>1?(g=d[1],h=d.length>2?d[2]:d[0]):(g=d[0],h=d[0])),b.call(this,a.Core.game,0,0,c,null,null,g,f,h,null),this._framesString=[f,g,h],this.soundOver="over",this.soundDown="click",this.anchor.setTo(.5),this._cb=e,this._deltaScale=.1,this._defaultScale=1,this._isDown=!1,this._isOver=!1,this.onInputOver.add(this.over,this),this.onInputOut.add(this.out,this),this.onInputDown.add(this.down,this),this.onInputUp.add(this.up,this)}return __extends(c,b),c.prototype.setCBContext=function(a){this._cntxt=a},c.prototype.setAnimationScale=function(a,b){void 0===a&&(a=0),void 0===b&&(b=1),this._deltaScale=a,this._defaultScale=b},c.prototype.over=function(){this._isDown||this.scale.set(this._defaultScale+this._deltaScale),this._isOver=!0},c.prototype.out=function(){this._isDown||this.scale.set(this._defaultScale),this._isOver=!1},c.prototype.up=function(){var a=this;if(this._isDown){this.scale.set(this._isOver?this._defaultScale+this._deltaScale:this._defaultScale);var b=this.game.device.desktop?this._isOver:this.input.pointerOver();this._isOver?this.frameName=this._framesString[1]:b&&setTimeout(function(){a.frameName=a._framesString[0]},5),this._isDown=!1,b&&null!=this._cb?(this._cntxt?this._cb.bind(this._cntxt)():this._cb(),this.frameName=this._framesString[0]):0==b&&this.scale.set(this._defaultScale)}},c.prototype.down=function(){this._isDown||(this.scale.set(this._defaultScale-this._deltaScale),this._isDown=!0)},c.prototype.deleteFromParent=function(){this.parent&&this.parent.removeChild(this),this.onInputOver.remove(this.over,this),this.onInputOut.remove(this.out,this),this.onInputDown.remove(this.down,this),this.onInputUp.remove(this.up,this)},Object.defineProperty(c.prototype,"enabled",{set:function(a){var b=this;this.inputEnabled=a,a||setTimeout(function(){b.frameName=b._framesString[0],b.scale.set(b._defaultScale)},5)},enumerable:!0,configurable:!0}),c}(Phaser.Button);a.OButton=b}(mygame||(mygame={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},mygame;!function(a){var b=function(b){function c(c,d,e,f){void 0===f&&(f=null);var g=null,h=null,i=null,j=null,k=null,l=null;d.length>0&&(g=d[0],d.length>1?(h=d[1],i=d.length>2?d[2]:d[0]):(h=d[0],i=d[0])),e.length>0&&(j=e[0],e.length>1?(k=e[1],l=e.length>2?e[2]:e[0]):(k=e[0],l=e[0])),b.call(this,a.Core.game,0,0,c,null,null,h,g,i,null),this._framesString=[g,h,i,j,k,l],this._check=!0,this.soundOver="over",this.soundDown="click",this.anchor.setTo(.5),this._cb=f,this._deltaScale=.1,this._defaultScale=1,this._isDown=!1,this._isOver=!1,this.onInputOver.add(this.over,this),this.onInputOut.add(this.out,this),this.onInputDown.add(this.down,this),this.onInputUp.add(this.up,this)}return __extends(c,b),c.prototype.setCheck=function(a){if(this._check!=a){this._check=a;var b=0;a||(b=3),this.setFrames(this._framesString[b+1],this._framesString[b],this._framesString[b+2],this._framesString[b])}},Object.defineProperty(c.prototype,"check",{get:function(){return this._check},enumerable:!0,configurable:!0}),c.prototype.setCBContext=function(a){this._cntxt=a},c.prototype.setAnimationScale=function(a,b){void 0===a&&(a=0),void 0===b&&(b=1),this._deltaScale=a,this._defaultScale=b},c.prototype.over=function(){this._isDown||this.scale.set(this._defaultScale+this._deltaScale),this._isOver=!0,console.log("OVER")},c.prototype.out=function(){this._isDown||this.scale.set(this._defaultScale),this._isOver=!1},c.prototype.up=function(){var a=this;if(this._isDown){this.scale.set(this._isOver?this._defaultScale+this._deltaScale:this._defaultScale);var b=this.game.device.desktop?this._isOver:this.input.pointerOver();this._isOver?this.frameName=this._framesString[1+(this._check?0:3)]:b&&setTimeout(function(){a.frameName=a._framesString[a._check?0:3]},5),this._isDown=!1,b&&null!=this._cb?(this.setCheck(!this.check),this._cntxt?this._cb.bind(this._cntxt)():this._cb(),this.frameName=this._framesString[this._check?0:3]):0==b&&this.scale.set(this._defaultScale)}},c.prototype.down=function(){this._isDown||(this.scale.set(this._defaultScale-this._deltaScale),this._isDown=!0)},c.prototype.deleteFromParent=function(){this.parent&&this.parent.removeChild(this),this.onInputOver.remove(this.over,this),this.onInputOut.remove(this.out,this),this.onInputDown.remove(this.down,this),this.onInputUp.remove(this.up,this)},Object.defineProperty(c.prototype,"enabled",{set:function(a){var b=this;this.inputEnabled=a,a||setTimeout(function(){b.frameName=b._framesString[b._check?0:3],b.scale.set(b._defaultScale)},5)},enumerable:!0,configurable:!0}),c}(Phaser.Button);a.OButtonCheck=b}(mygame||(mygame={}));var mygame;!function(a){var b=function(){function a(a,b,c,d){void 0===d&&(d=!1),this.name=a,this.cb=b,this.useCapture=d,this.userData=c}return a}(),c=function(){function a(){this._listeners=[]}return a.prototype.on=function(a,c,d){if(null!=c){for(var e=0;e<this._listeners.length;e++)if(a==this._listeners[e].name&&c==this._listeners[e].cb)return;this._listeners.push(new b(a,c,d))}},a.prototype.off=function(a,b){for(var c=0;c<this._listeners.length;)a!=this._listeners[c].name||null!=b&&b!=this._listeners[c].cb?c++:this._listeners.splice(c,1)},a.prototype.dispatch=function(a,b){for(var c=0;c<this._listeners.length;c++)if(a==this._listeners[c].name&&(this._listeners[c].cb(b),this._listeners[c].useCapture))return},a}();a.OEventDispatcher=c}(mygame||(mygame={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},mygame;!function(a){var b=function(b){function c(c,d,e,f){void 0===c&&(c=0),void 0===d&&(d=0),b.call(this,a.Core.game,0,0,e,f),this.anchor.set(.5),this.game.world.addChild(this),this._landscapeScaleX=1,this._portretScaleX=1,this._landscapeScaleY=1,this._portretScaleY=1,this._bgMode=!1,this._testMaskMode=!1,this._landscapeVisible=!0,this._portretVisible=!0,this._screenScreenCompress=!1,this._customMask=null,a.Core.isDefaultLandscape?(this._landscapeX=c/a.Core.defaultWidth,this._landscapeY=d/a.Core.defaultHeight,this._portretX=this._landscapeX,this._portretY=this._landscapeY):(this._portretX=c/a.Core.defaultWidth,this._portretY=d/a.Core.defaultHeight,this._landscapeX=this._portretX,this._landscapeY=this._portretY),this._landscapeLeftOffset=null,this._portretLeftOffset=null,this._landscapeTopOffset=null,this._portretTopOffset=null,this._landscapeRightffset=null,this._portretRightOffset=null,this._landscapeBottomOffset=null,this._portretBottomOffset=null,this.changeOrientation(),a.Core.globalEvents.on("changeOrientationAndResize",this.changeOrientation.bind(this),!1)}return __extends(c,b),c.prototype.add=function(a){this.addChild(a)},c.prototype.otherXY=function(b,c){return a.Core.isDefaultLandscape?(this._portretX=b/a.Core.defaultHeight,this._portretY=c/a.Core.defaultWidth):(this._landscapeX=b/a.Core.defaultHeight,this._landscapeY=c/a.Core.defaultWidth),this},c.prototype.myLeftOffset=function(b){return a.Core.isDefaultLandscape?this._landscapeLeftOffset=b:this._portretLeftOffset=b,this},c.prototype.otherLeftOffset=function(b){return a.Core.isDefaultLandscape?this._portretLeftOffset=b:this._landscapeLeftOffset=b,this},c.prototype.myRightOffset=function(b){return a.Core.isDefaultLandscape?this._landscapeRightffset=b:this._portretRightOffset=b,this},c.prototype.otherRightOffset=function(b){return a.Core.isDefaultLandscape?this._portretRightOffset=b:this._landscapeRightffset=b,this},c.prototype.myTopOffset=function(b){return a.Core.isDefaultLandscape?this._landscapeTopOffset=b:this._portretTopOffset=b,this},c.prototype.otherTopOffset=function(b){return a.Core.isDefaultLandscape?this._portretTopOffset=b:this._landscapeTopOffset=b,this},c.prototype.myBottomOffset=function(b){return a.Core.isDefaultLandscape?this._landscapeBottomOffset=b:this._portretBottomOffset=b,this},c.prototype.otherBottomOffset=function(b){return a.Core.isDefaultLandscape?this._portretBottomOffset=b:this._landscapeBottomOffset=b,this},c.prototype.end=function(){return this.changeOrientation(),this},c.prototype.myScale=function(b,c){return a.Core.isDefaultLandscape?(this._landscapeScaleX=b,this._landscapeScaleY=c?c:b):(this._portretScaleX=b,this._portretScaleY=c?c:b),this},c.prototype.otherScale=function(b,c){return a.Core.isDefaultLandscape?(this._portretScaleX=b,this._portretScaleY=c?c:b):(this._landscapeScaleX=b,this._landscapeScaleY=c?c:b),this},Object.defineProperty(c.prototype,"currentScale",{get:function(){return a.Core.isLandscape?{x:this._landscapeScaleX,y:this._landscapeScaleY}:{x:this._portretScaleX,y:this._portretScaleY}},enumerable:!0,configurable:!0}),c.prototype.myVisible=function(b){return a.Core.isDefaultLandscape?this._landscapeVisible=b:this._portretVisible=b,this},c.prototype.otherVisible=function(b){return a.Core.isDefaultLandscape?this._portretVisible=b:this._landscapeVisible=b,this},c.prototype.enabledBgMode=function(){return this._bgMode=!0,this},c.prototype.enabledMask=function(b,c,d,e,f){this._customMask=new Phaser.Graphics(this.game,0,0),this._customMask.beginFill(16711680,.5);var g=d?d:a.Core.defaultWidth,h=e?e:a.Core.defaultHeight;return this._customMask.drawRect(.5*-g+(b?b:0),.5*-h+(c?c:0),g,h),this._customMask.endFill(),1!=f?(this.mask=this._customMask,this.addChild(this._customMask)):(this._testMaskMode=!0,this._customMask.x=this.x,this._customMask.y=this.y,this.game.world.addChild(this._customMask)),this},c.prototype.changeOrientation=function(){var b=1,c=1;this._bgMode&&(b=c=a.Core.bgModeScale),a.Core.isLandscape?(this.x=a.Core.width*this._landscapeX,this.y=a.Core.height*this._landscapeY,this.visible=this._landscapeVisible,b*=this._landscapeScaleX,c*=this._landscapeScaleY,this.applyLandscapeOffsets()):(this.x=a.Core.width*this._portretX,this.y=a.Core.height*this._portretY,this.visible=this._portretVisible,b*=this._portretScaleX,c*=this._portretScaleY,this.applyPortretOffsets()),this._screenScreenCompress&&(b=c=Math.min(a.Core.width/a.Core.defaultWidth,a.Core.height/a.Core.defaultHeight)),this.scale.set(b,c),this._testMaskMode&&(this._customMask.x=this.x,this._customMask.y=this.y)},c.prototype.applyLandscapeOffsets=function(){null!=this._landscapeLeftOffset&&(this.x=this._landscapeLeftOffset),null!=this._landscapeRightffset&&(this.x=a.Core.width-this._landscapeRightffset),null!=this._landscapeTopOffset&&(this.y=this._landscapeTopOffset),null!=this._landscapeBottomOffset&&(this.y=a.Core.height-this._landscapeBottomOffset)},c.prototype.applyPortretOffsets=function(){null!=this._portretLeftOffset&&(this.x=this._portretLeftOffset),null!=this._portretRightOffset&&(this.x=a.Core.width-this._portretRightOffset),null!=this._portretTopOffset&&(this.y=this._portretTopOffset),null!=this._portretBottomOffset&&(this.y=a.Core.height-this._portretBottomOffset)},c}(Phaser.Sprite);a.OSprite=b}(mygame||(mygame={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},mygame;!function(a){var b=function(b){function c(c){void 0===c&&(c=!1),b.call(this),c&&(a.Core.globalEvents.on("changeOrientationAndResize",this.changeOrientation.bind(this),!1),this.changeOrientation())}return __extends(c,b),c.prototype.changeOrientation=function(){a.Core.isLandscape?this.onLandscape():this.onPortret()},c.prototype.onPortret=function(){},c.prototype.onLandscape=function(){},c}(Phaser.State);a.OState=b}(mygame||(mygame={}));